<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>채팅</title>
    <!-- <link rel="stylesheet" href="/css/index.css" /> -->
    <link rel="stylesheet" href="../css/chating.css" />
    <script src="/socket.io/socket.io.js"></script>

    <script>
      // 현재 URL을 가져옵니다.
      var currentUrl = window.location.href;

      // URL 객체를 생성합니다.
      var url = new URL(currentUrl);

      // URLSearchParams 객체를 생성하여 쿼리 매개변수를 추출합니다.
      var searchParams = new URLSearchParams(url.search);

      // username 값을 가져옵니다.
      var username = searchParams.get("username");

      // username 값을 출력합니다.
      console.log(username);

      var socket = io();

      /* 접속 되었을 때 실행 */
      socket.on("connect", function () {
        /* 이름을 입력받고 */
        // var name = prompt("반갑습니다!", "");
        var name = username;
        console.log(name);

        /* 서버에 새로운 유저가 왔다고 알림 */
        socket.emit("newUser", name);
      });
    </script>
  </head>
  <body>
    <section class="msger">
      <header class="msger-header">
        <div class="msger-header-title">
          <i class="fas fa-comment-alt"></i> Family Chat
        </div>
        <div class="msger-header-options">
          <span><i class="fas fa-cog"></i></span>
        </div>
      </header>

      <main class="msger-chat">
        <!--코드 생성 되는 장소-->
      </main>

      <form class="msger-inputarea">
        <input
          type="text"
          class="msger-input"
          placeholder="Enter your message..."
        />
        <button type="submit" class="msger-send-btn">Send</button>
      </form>
    </section>

    <script src="/js/chat.js"></script>
  </body>
</html>
